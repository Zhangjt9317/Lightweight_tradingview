<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title></title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />

    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript" src="exchangeinfo.js"></script>
  </head>
  <body>
    <h2>Binance BTCUSDT Chart</h2>
    <select onCharge="LoadCharts();" id="pairs"></select>
    <br />
    <div class="tradingview-widget-container" id="tvchart" ></div>
  </body>

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js"></script>
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>

  <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"/>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
  <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet"/>
  <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

  <script>
    //PASS ALL THE SYMBOLS
    var sym = exchangeInfo.symbols,
      markup = "";
    sym.forEach((d) => {
      markup += '<option value="' + d.symbol + '">' + d.symbol + "</option>";
    });
    document.getElementById("pairs").innerHTML = markup;

    LoadCharts();
    function LoadCharts() {
      let symbol = document.getElementById("pairs").value;
      //RENDER CHART
      new TradingView.widget({
        autosize: true,
        symbol: "BINANCE:" + symbol,
        interval: "5",
        timezone: "Asia/Kolkata",
        theme: "Light",
        style: "1",
        locale: "in",
        toolbar_bg: "#f1f3f6",
        enable_publishing: false,
        allow_symbol_change: true,
        studies: [
          "BB@tv-basicstudies",
        ],
        container_id: "tvchart",
      });
    }
  </script>
</html>
